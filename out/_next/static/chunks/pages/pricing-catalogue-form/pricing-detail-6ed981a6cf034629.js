(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[296],{3525:(e,r,d)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/pricing-catalogue-form/pricing-detail",function(){return d(5549)}])},5204:(e,r,d)=>{"use strict";d.d(r,{A:()=>l});var i=d(4848);d(6540);var t=d(8331);let l=e=>{let{title:r,children:d,maxWidth:l=1200,fullWidth:s=!1}=e;return(0,i.jsx)(t.A,{title:r,bordered:!1,style:{width:"100%",maxWidth:s?"100%":l,margin:"0 auto",transition:"max-width 0.2s ease-in-out"},children:d})}},5549:(e,r,d)=>{"use strict";d.r(r),d.d(r,{default:()=>u});var i=d(4848),t=d(6540),l=d(8728),s=d(6740),n=d(1531),a=d(3608),o=d(1027),c=d(5204),p=d(1609),h=d(3093),x=d(6715);let{Option:g}=l.A,u=()=>{var e,r;let{pricingCategory:d}=(0,x.useRouter)().query,[u,y]=(0,t.useState)(""),[b,j]=(0,t.useState)([]),[f,m]=(0,t.useState)({}),[A,w]=(0,t.useState)(!1),[v,C]=(0,t.useState)(!1),[k]=s.A.useForm(),[T,S]=(0,t.useState)(null),[q,N]=(0,t.useState)(!1),[E,_]=(0,t.useState)(null),[P,F]=(0,t.useState)(null),R=async()=>{try{let e=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/pricingcategories"));if(e.ok){let r=await e.json();j(r)}else console.error("Failed to fetch services:",e.statusText)}catch(e){console.error("Error fetching services:",e)}},I=async()=>{try{let e={};for(let r of b){let d=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/tiers/pricingcategory/").concat(r.id));if(d.ok){let i=await d.json();e[r.id]=i.map(e=>({tier:"Tier ".concat(e.tierNumber),quality:e.qualityRange,credit:e.creditPerUnit}))}else console.error("Failed to fetch tiers for service ".concat(r.id,":"),d.statusText)}m(e)}catch(e){console.error("Error fetching tiers for all services:",e)}};(0,t.useEffect)(()=>{R()},[]),(0,t.useEffect)(()=>{b.length>0&&I()},[b]);let U=e=>{F(e),w(!0)},D=(e,r)=>{F(e),_(r);let d=f[e][r];k.setFieldsValue({quality:d.quality,credit:d.credit}),C(!0)},O=()=>{w(!1),C(!1),k.resetFields()},L=(e,r)=>{let d=f[e].filter((e,d)=>d!==r);m(r=>({...r,[e]:d}))},Q=()=>{let e=[];for(let[r,d]of Object.entries(f)){let i=b.find(e=>e.id===r);i&&d.forEach(r=>{let d=parseInt(r.tier.replace("Tier ",""),10);e.push({PricingCategoryId:i.id,TierNumber:d,QualityRange:r.quality,CreditPerUnit:r.credit})})}return e},z=async()=>{let e=Q();console.log(e);try{let r=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/tiers"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});r.ok?(h.oR.success("Tiers posted successfully!"),I()):h.oR.error(r.statusText)}catch(e){h.oR.error("An error occurred while posting data.")}};return(0,i.jsxs)(p.A,{children:[(0,i.jsx)(c.A,{title:"Service Pricing",children:(0,i.jsxs)("div",{style:{padding:"20px"},children:[(0,i.jsxs)(l.A,{showSearch:!0,placeholder:"Select a service",onChange:e=>{S(e),q&&N(!1)},style:{width:200,marginRight:10},filterOption:(e,r)=>{var d;return(null!==(d=null==r?void 0:r.children)&&void 0!==d?d:"").toLowerCase().includes(e.toLowerCase())},children:[(0,i.jsx)(g,{value:"",disabled:!0,children:"Select a service"}),b.map(e=>(0,i.jsx)(g,{value:e.id,children:e.pricingCategoryName},e.id))]}),(0,i.jsx)(n.Ay,{style:{marginLeft:"10px"},onClick:()=>{N(e=>{let r=!e;return r&&S(null),r})},children:q?"Hide All":"Show All"}),(0,i.jsx)(n.Ay,{type:"primary",onClick:z,style:{marginTop:"20px"},children:"Submit"}),T&&!q&&(0,i.jsx)("div",{style:{marginTop:"20px"},children:(0,i.jsx)(c.A,{title:(null===(e=b.find(e=>e.id===T))||void 0===e?void 0:e.pricingCategoryName)||T,children:(0,i.jsxs)("div",{style:{padding:"20px"},children:[(0,i.jsx)(n.Ay,{type:"primary",onClick:()=>U(T),children:"Add Tier"}),(0,i.jsx)("br",{}),(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px",textAlign:"center",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",boxShadow:"rgb(0 0 0 / 23%) 5px 5px 10px 6px"},children:[(0,i.jsxs)("thead",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{border:"1px solid #ddd"}}),(0,i.jsx)("th",{colSpan:3,style:{border:"1px solid #ddd",padding:"8px",color:"white",background:"linear-gradient(90deg, rgb(0 79 155) 0%, rgb(0 79 155) 35%, rgba(0, 212, 255, 1) 100%)"},children:(null===(r=b.find(e=>e.id===T))||void 0===r?void 0:r.pricingCategoryName)||T})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",background:"linear-gradient(160deg, #0093E9 0%, #80D0C7 100%)"},children:"Tier"}),(0,i.jsx)("th",{style:{border:"1px solid #ddd",color:"white",padding:"8px",background:"linear-gradient(359deg, #8bd4ff 0%, #0015ff 100%)"},children:"Quality [Sensor]"}),(0,i.jsx)("th",{style:{border:"1px solid #ddd",color:"white",padding:"8px",background:"linear-gradient(359deg, #8bd4ff 0%, #0015ff 100%)"},children:"Credit per Unit/month"}),(0,i.jsx)("th",{style:{border:"1px solid #ddd",color:"white",padding:"8px",background:"linear-gradient(359deg, #8bd4ff 0%, #0015ff 100%)"},children:"Action"})]})]}),(0,i.jsx)("tbody",{children:(f[T]||[]).map((e,r)=>(0,i.jsxs)("tr",{style:{background:r%2==0?"linear-gradient(160deg, #e0f7fa 0%, #80deea 100%)":"linear-gradient(160deg, #ffebee 0%, #9ab8ef 100%)"},children:[(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",background:"linear-gradient(160deg, #0093E9 0%, #80D0C7 100%)"},children:e.tier}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:e.quality}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:e.credit}),(0,i.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:[(0,i.jsx)(n.Ay,{type:"primary",onClick:()=>D(T,r),children:"Update"}),(0,i.jsx)(n.Ay,{type:"danger btn-danger",onClick:()=>L(T,r),style:{marginLeft:"10px"},children:"Delete"})]})]},r))})]})]})})}),q&&(0,i.jsx)("div",{style:{marginTop:"20px"},children:b.map(e=>(0,i.jsx)(c.A,{title:e.pricingCategoryName,children:(0,i.jsxs)("div",{style:{padding:"20px"},children:[(0,i.jsx)(n.Ay,{type:"primary",onClick:()=>U(e.id),children:"Add Tier"}),(0,i.jsx)("br",{}),(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px",textAlign:"center",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",boxShadow:"rgb(0 0 0 / 23%) 5px 5px 10px 6px"},children:[(0,i.jsxs)("thead",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{border:"1px solid #ddd"}}),(0,i.jsx)("th",{colSpan:3,style:{border:"1px solid #ddd",padding:"8px",color:"white",background:"linear-gradient(90deg, rgb(0 79 155) 0%, rgb(0 79 155) 35%, rgba(0, 212, 255, 1) 100%)"},children:e.pricingCategoryName})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",background:"linear-gradient(160deg, #0093E9 0%, #80D0C7 100%)",color:"white"},children:"Tier"}),(0,i.jsx)("th",{style:{border:"1px solid #ddd",color:"white",padding:"8px",background:"linear-gradient(359deg, #8bd4ff 0%, #0015ff 100%)"},children:"Quality [Sensor]"}),(0,i.jsx)("th",{style:{border:"1px solid #ddd",color:"white",padding:"8px",background:"linear-gradient(359deg, #8bd4ff 0%, #0015ff 100%)"},children:"Credit per Unit/month"}),(0,i.jsx)("th",{style:{border:"1px solid #ddd",color:"white",padding:"8px",background:"linear-gradient(359deg, #8bd4ff 0%, #0015ff 100%)"},children:"Action"})]})]}),(0,i.jsx)("tbody",{children:(f[e.id]||[]).map((r,d)=>(0,i.jsxs)("tr",{style:{background:d%2==0?"linear-gradient(160deg, #e0f7fa 0%, #80deea 100%)":"linear-gradient(160deg, #ffebee 0%, #9ab8ef 100%)"},children:[(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",background:"linear-gradient(160deg, #0093E9 0%, #80D0C7 100%)"},children:r.tier}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:r.quality}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:r.credit}),(0,i.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:[(0,i.jsx)(n.Ay,{type:"primary",onClick:()=>D(e.id,d),children:"Update"}),(0,i.jsx)(n.Ay,{type:"danger",className:"btn-danger",onClick:()=>L(e.id,d),style:{marginLeft:"10px"},children:"Delete"})]})]},d))})]})]})},e.id))})]})}),(0,i.jsx)(a.A,{title:"Add New Tier",visible:A,onCancel:O,footer:null,children:(0,i.jsxs)(s.A,{form:k,onFinish:e=>{let r=f[P]||[],d=r.length+1,i=[...r,{tier:"Tier ".concat(d),...e}];m(e=>({...e,[P]:i})),w(!1),k.resetFields()},children:[(0,i.jsx)(s.A.Item,{name:"quality",label:"Quality",rules:[{required:!0,message:"Please input the quality!"}],children:(0,i.jsx)(o.A,{})}),(0,i.jsx)(s.A.Item,{name:"credit",label:"Credit",rules:[{required:!0,message:"Please input the credit!"}],children:(0,i.jsx)(o.A,{})}),(0,i.jsx)(s.A.Item,{children:(0,i.jsx)(n.Ay,{type:"primary",htmlType:"submit",children:"Add Tier"})})]})}),(0,i.jsx)(a.A,{title:"Update Tier",visible:v,onCancel:O,footer:null,children:(0,i.jsxs)(s.A,{form:k,onFinish:e=>{let r=[...f[P]];r[E]={...r[E],quality:e.quality,credit:e.credit},m(e=>({...e,[P]:r})),C(!1),k.resetFields()},children:[(0,i.jsx)(s.A.Item,{name:"quality",label:"Quality",rules:[{required:!0,message:"Please input the quality!"}],children:(0,i.jsx)(o.A,{})}),(0,i.jsx)(s.A.Item,{name:"credit",label:"Credit",rules:[{required:!0,message:"Please input the credit!"}],children:(0,i.jsx)(o.A,{})}),(0,i.jsx)(s.A.Item,{children:(0,i.jsx)(n.Ay,{type:"primary",htmlType:"submit",children:"Update Tier"})})]})}),(0,i.jsx)(h.N9,{})]})}},6715:(e,r,d)=>{e.exports=d(8440)}},e=>{var r=r=>e(e.s=r);e.O(0,[6053,3418,8331,2453,5262,7239,2084,1106,8728,3067,6740,3093,3608,1609,636,6593,8792],()=>r(3525)),_N_E=e.O()}]);