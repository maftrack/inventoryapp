(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2590],{1113:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/service-history",function(){return t(8171)}])},5204:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var n=t(4848);t(6540);var r=t(8331);let i=e=>{let{title:a,children:t,maxWidth:i=1200,fullWidth:l=!1}=e;return(0,n.jsx)(r.A,{title:a,bordered:!1,style:{width:"100%",maxWidth:l?"100%":i,margin:"0 auto",transition:"max-width 0.2s ease-in-out"},children:t})}},8171:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>g});var n=t(4848),r=t(6540),i=t(1027),l=t(8728),d=t(2546),s=t(7004),c=t(1531),o=t(9901),u=t(3608),h=t(6740),m=t(6533),b=t(1609),v=t(5204);let{Search:x}=i.A,{Option:j}=l.A,{TabPane:A}=d.A,g=()=>{let[e,a]=(0,r.useState)([]),[t,g]=(0,r.useState)(!0),[C,p]=(0,r.useState)({current:1,pageSize:10}),[k,y]=(0,r.useState)(""),[N,S]=(0,r.useState)(!1),[w,E]=(0,r.useState)({transactionid:{value:"",enabled:!1},serviceName:{value:"",enabled:!1},editor:{value:"",enabled:!1},status:{value:"",enabled:!1},amount:{value:"",enabled:!1}}),[f,I]=(0,r.useState)({dateCreated:!0,transactionid:!0,serviceName:!0,amount:!0,editor:!0,status:!0,action:!0});(0,r.useEffect)(()=>{_()},[C.current,C.pageSize,k,w]),(0,r.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("visibleColumns"));e&&I(e)},[]);let _=async()=>{g(!0);try{let e=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/purchaseServiceHistory?page=").concat(C.current,"&pageSize=").concat(C.pageSize,"&search=").concat(k,"&transactionid=").concat(w.transactionid.enabled?w.transactionid.value:"","&serviceName=").concat(w.serviceName.enabled?w.serviceName.value:"","&editor=").concat(w.editor.enabled?w.editor.value:"","&status=").concat(w.status.enabled?w.status.value:"","&amount=").concat(w.amount.enabled?w.amount.value:""));if(!e.ok)throw Error("Network response was not ok");let t=await e.json();a(t.items),p({...C,total:t.total})}catch(e){console.error("Error fetching data:",e)}finally{g(!1)}},z=(e,a)=>{let t={...f,[e]:a};I(t),localStorage.setItem("visibleColumns",JSON.stringify(t))},D=[{title:"Time",dataIndex:"dateCreated",key:"dateCreated",render:e=>new Date(e).toLocaleString(),sorter:(e,a)=>new Date(e.dateCreated)-new Date(a.dateCreated)},{title:"Transaction ID",dataIndex:"transactionid",key:"transactionid",sorter:(e,a)=>e.transactionid.localeCompare(a.transactionid)},{title:"Service Name",dataIndex:"serviceName",key:"serviceName",sorter:(e,a)=>e.serviceName.localeCompare(a.serviceName)},{title:"Amount (Credit)",dataIndex:"amount",key:"amount",render:e=>"".concat(e," Credit"),sorter:(e,a)=>e.amount-a.amount},{title:"Editor",dataIndex:"editor",key:"editor",sorter:(e,a)=>e.editor.localeCompare(a.editor)},{title:"Status",dataIndex:"status",key:"status",sorter:(e,a)=>e.status.localeCompare(a.status)},{title:"Activity",dataIndex:"action",key:"action"}].filter(e=>f[e.key]);return(0,n.jsx)(b.A,{children:(0,n.jsx)(v.A,{title:"Service History",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)(s.A,{style:{marginBottom:16},children:[(0,n.jsx)(x,{placeholder:"Search...",onSearch:e=>{y(e),p({...C,current:1})},style:{width:200}}),(0,n.jsx)(c.Ay,{type:"primary",onClick:()=>{S(!0)},children:"Advanced Filter"})]}),(0,n.jsx)(o.A,{columns:D,dataSource:e,pagination:C,loading:t,onChange:(e,a,t)=>{p(e)},rowKey:"id"}),(0,n.jsx)(u.A,{title:"Advanced Filter",visible:N,onOk:()=>{S(!1),_()},onCancel:()=>{S(!1)},width:800,children:(0,n.jsxs)(d.A,{defaultActiveKey:"1",children:[(0,n.jsx)(A,{tab:"Filters",children:(0,n.jsxs)(h.A,{layout:"vertical",onValuesChange:e=>{E(a=>({...a,...e}))},children:[(0,n.jsx)(h.A.Item,{label:"Transaction ID",children:(0,n.jsxs)(s.A,{children:[(0,n.jsx)(i.A,{placeholder:"Enter Transaction ID",onChange:e=>E({...w,transactionid:{...w.transactionid,value:e.target.value,enabled:w.transactionid.enabled}}),disabled:!w.transactionid.enabled}),(0,n.jsx)(m.A,{checked:w.transactionid.enabled,onChange:e=>E({...w,transactionid:{...w.transactionid,enabled:e.target.checked}}),children:"Enable"})]})}),(0,n.jsx)(h.A.Item,{label:"Service Name",children:(0,n.jsxs)(s.A,{children:[(0,n.jsx)(i.A,{placeholder:"Enter Service Name",onChange:e=>E({...w,serviceName:{...w.serviceName,value:e.target.value,enabled:w.serviceName.enabled}}),disabled:!w.serviceName.enabled}),(0,n.jsx)(m.A,{checked:w.serviceName.enabled,onChange:e=>E({...w,serviceName:{...w.serviceName,enabled:e.target.checked}}),children:"Enable"})]})}),(0,n.jsx)(h.A.Item,{label:"Editor",children:(0,n.jsxs)(s.A,{children:[(0,n.jsx)(i.A,{placeholder:"Enter Editor Name",onChange:e=>E({...w,editor:{...w.editor,value:e.target.value,enabled:w.editor.enabled}}),disabled:!w.editor.enabled}),(0,n.jsx)(m.A,{checked:w.editor.enabled,onChange:e=>E({...w,editor:{...w.editor,enabled:e.target.checked}}),children:"Enable"})]})}),(0,n.jsx)(h.A.Item,{label:"Status",children:(0,n.jsxs)(s.A,{children:[(0,n.jsxs)(l.A,{defaultValue:"",style:{width:120},onChange:e=>E({...w,status:{...w.status,value:e,enabled:w.status.enabled}}),children:[(0,n.jsx)(j,{value:"",children:"Select Status"}),(0,n.jsx)(j,{value:"Pending",children:"Pending"}),(0,n.jsx)(j,{value:"Confirm",children:"Confirm"}),(0,n.jsx)(j,{value:"Canceled",children:"Canceled"})]}),(0,n.jsx)(m.A,{checked:w.status.enabled,onChange:e=>E({...w,status:{...w.status,enabled:e.target.checked}}),children:"Enable"})]})}),(0,n.jsx)(h.A.Item,{label:"Amount (Credit)",children:(0,n.jsxs)(s.A,{children:[(0,n.jsx)(i.A,{placeholder:"Enter Amount",onChange:e=>E({...w,amount:{...w.amount,value:e.target.value,enabled:w.amount.enabled}}),disabled:!w.amount.enabled}),(0,n.jsx)(m.A,{checked:w.amount.enabled,onChange:e=>E({...w,amount:{...w.amount,enabled:e.target.checked}}),children:"Enable"})]})})]})},"1"),(0,n.jsx)(A,{tab:"Columns",children:(0,n.jsx)(s.A,{direction:"vertical",children:Object.keys(f).map(e=>{let a=e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/^[a-z]/,e=>e.toUpperCase());return(0,n.jsx)(m.A,{checked:f[e],onChange:a=>z(e,a.target.checked),children:a},e)})})},"2")]})})]})})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[6053,3418,8331,2453,5262,7239,2084,1106,8728,3067,6740,7078,9901,3608,1609,636,6593,8792],()=>a(1113)),_N_E=e.O()}]);