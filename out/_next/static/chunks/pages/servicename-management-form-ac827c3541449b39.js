(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1739],{6789:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/servicename-management-form",function(){return r(7050)}])},5204:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(4848);r(6540);var a=r(8331);let i=e=>{let{title:t,children:r,maxWidth:i=1200,fullWidth:n=!1}=e;return(0,s.jsx)(a.A,{title:t,bordered:!1,style:{width:"100%",maxWidth:n?"100%":i,margin:"0 auto",transition:"max-width 0.2s ease-in-out"},children:r})}},7050:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(4848),a=r(6540),i=r(1565),n=r(8728),o=r(6740),c=r(1531),l=r(9901),d=r(878),h=r(3608),u=r(1027),p=r(3093);r(4338);var m=r(1303),y=r(1609),f=r(5204),g=r(5349),j=r(8899);let{Title:A}=i.A,{Option:v}=n.A,x=()=>{let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)([]),[x,b]=(0,a.useState)(!1),[w,S]=(0,a.useState)(!1),[C,E]=(0,a.useState)(null),[I]=o.A.useForm(),N=async()=>{try{let e=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/services"));if(e.ok){let r=await e.json();console.log(r),t(r)}else throw Error("Failed to fetch services")}catch(e){p.oR.error(e.message)}},U=async()=>{try{let e=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/categories"));if(e.ok){let t=await e.json();i(t)}else throw Error("Failed to fetch categories")}catch(e){p.oR.error(e.message)}};(0,a.useEffect)(()=>{N(),U()},[]);let k=async e=>{console.log("Adding Service:",e);try{let t=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/services"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,id:(0,m.A)()})});if(t.ok)p.oR.success("Service added successfully"),N(),b(!1),I.resetFields();else{let e=await t.json();throw Error(e.message||"Failed to add service")}}catch(e){p.oR.error(e.message)}},R=async e=>{try{let t={Id:C.id,Servicename:e.servicename,Description:e.description,Categoryid:e.categoryid};if(console.log(C),!(await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/services/").concat(C.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw Error("Failed to update service");p.oR.success("Service updated successfully"),await N(),S(!1),E(null)}catch(e){p.oR.error(e.message)}},D=async e=>{try{if((await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/services/").concat(e),{method:"DELETE"})).ok)p.oR.success("Service deleted successfully"),N();else throw Error("Failed to delete service")}catch(e){p.oR.error(e.message)}};return(0,s.jsx)(y.A,{children:(0,s.jsx)(f.A,{title:"Service List",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)(A,{level:4,children:"Manage Services"}),(0,s.jsx)(c.Ay,{type:"primary",onClick:()=>b(!0),style:{marginBottom:16},children:"Add Service"}),(0,s.jsxs)(l.A,{dataSource:e,rowKey:"id",bordered:!0,pagination:{pageSize:5},children:[(0,s.jsx)(l.A.Column,{title:"Service Name",dataIndex:"servicename"}),(0,s.jsx)(l.A.Column,{title:"Description",dataIndex:"description"}),(0,s.jsx)(l.A.Column,{title:"Category",dataIndex:"categoryid",render:e=>{let t=r.find(t=>t.categoryid===e);return t?t.categoryName:"N/A"}}),(0,s.jsx)(l.A.Column,{title:"Actions",render:(e,t)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Ay,{type:"link",icon:(0,s.jsx)(g.A,{}),onClick:()=>{E(t),S(!0),I.setFieldsValue(t)}}),(0,s.jsx)(d.A,{title:"Are you sure to delete this service?",onConfirm:()=>D(t.id),children:(0,s.jsx)(c.Ay,{type:"link",danger:!0,icon:(0,s.jsx)(j.A,{})})})]})})]}),(0,s.jsx)(h.A,{title:"Add Service",visible:x,onCancel:()=>b(!1),footer:null,children:(0,s.jsxs)(o.A,{form:I,onFinish:k,layout:"vertical",children:[(0,s.jsx)(o.A.Item,{name:"servicename",label:"Service Name",rules:[{required:!0,message:"Please input the service name!"}],children:(0,s.jsx)(u.A,{})}),(0,s.jsx)(o.A.Item,{name:"Description",label:"Description",children:(0,s.jsx)(u.A.TextArea,{})}),(0,s.jsx)(o.A.Item,{name:"categoryid",label:"Set the Category",rules:[{required:!0,message:"Please select the category!"}],children:(0,s.jsx)(n.A,{placeholder:"Please select the category",children:r.map(e=>(0,s.jsx)(v,{value:e.categoryid,children:e.categoryName},e.categoryid))})}),(0,s.jsx)(o.A.Item,{children:(0,s.jsx)(c.Ay,{type:"primary",htmlType:"submit",children:"Add"})})]})}),(0,s.jsx)(h.A,{title:"Edit Service",visible:w,onCancel:()=>{S(!1),E(null)},footer:null,children:(0,s.jsxs)(o.A,{form:I,onFinish:R,layout:"vertical",children:[(0,s.jsx)(o.A.Item,{name:"servicename",label:"Service Name",rules:[{required:!0,message:"Please input the service name!"}],children:(0,s.jsx)(u.A,{})}),(0,s.jsx)(o.A.Item,{name:"description",label:"Description",children:(0,s.jsx)(u.A.TextArea,{})}),(0,s.jsx)(o.A.Item,{name:"categoryid",label:"Category",rules:[{required:!0,message:"Please select the category!"}],children:(0,s.jsx)(n.A,{placeholder:"Please select the category",children:r.map(e=>(0,s.jsx)(v,{value:e.categoryid,children:e.categoryName},e.categoryid))})}),(0,s.jsx)(o.A.Item,{children:(0,s.jsx)(c.Ay,{type:"primary",htmlType:"submit",children:"Update"})})]})}),(0,s.jsx)(p.N9,{})]})})})}},1303:(e,t,r)=>{"use strict";let s;r.d(t,{A:()=>o});let a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},i=new Uint8Array(16),n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));let o=function(e,t,r){if(a.randomUUID&&!t&&!e)return a.randomUUID();let o=(e=e||{}).random??e.rng?.()??function(){if(!s){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");s=crypto.getRandomValues.bind(crypto)}return s(i)}();if(o.length<16)throw Error("Random bytes length must be >= 16");if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=o[e];return t}return function(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}(o)}}},e=>{var t=t=>e(e.s=t);e.O(0,[6053,3418,8331,2453,5262,7239,2084,1106,8728,3067,6740,3093,7078,9901,1565,3608,3009,1609,636,6593,8792],()=>t(6789)),_N_E=e.O()}]);