(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1739],{6789:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/servicename-management-form",function(){return r(7050)}])},5204:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(4848);r(6540);var i=r(8331);let a=e=>{let{title:t,children:r,maxWidth:a=1200,fullWidth:n=!1}=e;return(0,s.jsx)(i.A,{title:t,bordered:!1,style:{width:"100%",maxWidth:n?"100%":a,margin:"0 auto",transition:"max-width 0.2s ease-in-out"},children:r})}},7050:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(4848),i=r(6540),a=r(1565),n=r(8728),c=r(6740),o=r(1531),l=r(9901),d=r(878),u=r(3608),h=r(1027),m=r(3093);r(4338);var y=r(1303),p=r(1609),g=r(5204),A=r(5349),f=r(8899);let{Title:x}=a.A,{Option:j}=n.A,v=()=>{let[e,t]=(0,i.useState)([]),[r,a]=(0,i.useState)([]),[v,w]=(0,i.useState)(!1),[S,b]=(0,i.useState)(!1),[E,C]=(0,i.useState)(null),[I]=c.A.useForm(),N=async()=>{try{let e=await fetch("".concat("http://192.168.0.104:5216/api","/services"));if(e.ok){let r=await e.json();t(r)}else throw Error("Failed to fetch services")}catch(e){m.oR.error(e.message)}},U=async()=>{try{let e=await fetch("".concat("http://192.168.0.104:5216/api","/categories"));if(e.ok){let t=await e.json();a(t)}else throw Error("Failed to fetch categories")}catch(e){m.oR.error(e.message)}};(0,i.useEffect)(()=>{N(),U()},[]);let k=async e=>{console.log("Adding Service:",e);try{let t=await fetch("".concat("http://192.168.0.104:5216/api","/services"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,id:(0,y.A)()})});if(t.ok)m.oR.success("Service added successfully"),N(),w(!1),I.resetFields();else{let e=await t.json();throw Error(e.message||"Failed to add service")}}catch(e){m.oR.error(e.message)}},R=async e=>{try{let t={id:E.id,servicename:e.servicename,description:e.description,categoryid:e.categoryid};if(!(await fetch("".concat("http://192.168.0.104:5216/api","/services/").concat(E.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw Error("Failed to update service");m.oR.success("Service updated successfully"),await N(),b(!1),C(null)}catch(e){m.oR.error(e.message)}},D=async e=>{try{if((await fetch("".concat("http://192.168.0.104:5216/api","/services/").concat(e),{method:"DELETE"})).ok)m.oR.success("Service deleted successfully"),N();else throw Error("Failed to delete service")}catch(e){m.oR.error(e.message)}};return(0,s.jsx)(p.A,{children:(0,s.jsx)(g.A,{title:"Service List",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)(x,{level:4,children:"Manage Services"}),(0,s.jsx)(o.Ay,{type:"primary",onClick:()=>w(!0),style:{marginBottom:16},children:"Add Service"}),(0,s.jsxs)(l.A,{dataSource:e,rowKey:"id",bordered:!0,pagination:{pageSize:5},children:[(0,s.jsx)(l.A.Column,{title:"Service Name",dataIndex:"servicename"}),(0,s.jsx)(l.A.Column,{title:"Description",dataIndex:"servicename"}),(0,s.jsx)(l.A.Column,{title:"Category",dataIndex:"categoryid",render:e=>{let t=r.find(t=>t.categoryid===e);return t?t.categoryName:"N/A"}}),(0,s.jsx)(l.A.Column,{title:"Actions",render:(e,t)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Ay,{type:"link",icon:(0,s.jsx)(A.A,{}),onClick:()=>{C(t),b(!0),I.setFieldsValue(t)}}),(0,s.jsx)(d.A,{title:"Are you sure to delete this service?",onConfirm:()=>D(t.id),children:(0,s.jsx)(o.Ay,{type:"link",danger:!0,icon:(0,s.jsx)(f.A,{})})})]})})]}),(0,s.jsx)(u.A,{title:"Add Service",visible:v,onCancel:()=>w(!1),footer:null,children:(0,s.jsxs)(c.A,{form:I,onFinish:k,layout:"vertical",children:[(0,s.jsx)(c.A.Item,{name:"servicename",label:"Service Name",rules:[{required:!0,message:"Please input the service name!"}],children:(0,s.jsx)(h.A,{})}),(0,s.jsx)(c.A.Item,{name:"Description",label:"Description",rules:[{required:!0,message:"Please input the description!"}],children:(0,s.jsx)(h.A.TextArea,{})}),(0,s.jsx)(c.A.Item,{name:"categoryid",label:"Set the Category",rules:[{required:!0,message:"Please select the category!"}],children:(0,s.jsx)(n.A,{placeholder:"Please select the category",children:r.map(e=>(0,s.jsx)(j,{value:e.categoryid,children:e.categoryName},e.categoryid))})}),(0,s.jsx)(c.A.Item,{children:(0,s.jsx)(o.Ay,{type:"primary",htmlType:"submit",children:"Add"})})]})}),(0,s.jsx)(u.A,{title:"Edit Service",visible:S,onCancel:()=>{b(!1),C(null)},footer:null,children:(0,s.jsxs)(c.A,{form:I,onFinish:R,layout:"vertical",children:[(0,s.jsx)(c.A.Item,{name:"servicename",label:"Service Name",rules:[{required:!0,message:"Please input the service name!"}],children:(0,s.jsx)(h.A,{})}),(0,s.jsx)(c.A.Item,{name:"Description",label:"Description",rules:[{required:!0,message:"Please input the description!"}],children:(0,s.jsx)(h.A.TextArea,{})}),(0,s.jsx)(c.A.Item,{name:"categoryid",label:"Category",rules:[{required:!0,message:"Please select the category!"}],children:(0,s.jsx)(n.A,{placeholder:"Please select the category",children:r.map(e=>(0,s.jsx)(j,{value:e.categoryid,children:e.categoryName},e.categoryid))})}),(0,s.jsx)(c.A.Item,{children:(0,s.jsx)(o.Ay,{type:"primary",htmlType:"submit",children:"Update"})})]})}),(0,s.jsx)(m.N9,{})]})})})}},1303:(e,t,r)=>{"use strict";let s;r.d(t,{A:()=>c});let i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},a=new Uint8Array(16),n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));let c=function(e,t,r){if(i.randomUUID&&!t&&!e)return i.randomUUID();let c=(e=e||{}).random??e.rng?.()??function(){if(!s){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");s=crypto.getRandomValues.bind(crypto)}return s(a)}();if(c.length<16)throw Error("Random bytes length must be >= 16");if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=c[e];return t}return function(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}(c)}}},e=>{var t=t=>e(e.s=t);e.O(0,[994,1531,8331,3418,2453,5262,7239,2084,1106,8728,3067,6740,3093,1565,7078,9901,3608,3009,1609,636,6593,8792],()=>t(6789)),_N_E=e.O()}]);