(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6176],{2949:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/credit-rule-manager",function(){return r(4125)}])},5204:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(4848);r(6540);var a=r(8331);let s=e=>{let{title:t,children:r,maxWidth:s=1200,fullWidth:n=!1}=e;return(0,i.jsx)(a.A,{title:t,bordered:!1,style:{width:"100%",maxWidth:n?"100%":s,margin:"0 auto",transition:"max-width 0.2s ease-in-out"},children:r})}},4125:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var i=r(4848),a=r(6540),s=r(1565),n=r(6740),d=r(1531),o=r(878),l=r(9901),c=r(3608),u=r(1027),p=r(6715),h=r(3093);r(4338);var m=r(1303),f=r(1609),y=r(5204),j=r(5349),x=r(8899);let{Title:A}=s.A,w=()=>{(0,p.useRouter)();let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(!1),[w,b]=(0,a.useState)(!1),[g,R]=(0,a.useState)(null),[C]=n.A.useForm(),k=async()=>{try{let e=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/creditrules"));if(!e.ok)throw Error("Failed to fetch credit rules");let r=await e.json();t(r)}catch(e){h.oR.error("Failed to fetch credit rules")}};(0,a.useEffect)(()=>{k()},[]);let v=()=>{s(!1)},E=async()=>{try{let r=await C.validateFields(),i={id:(0,m.A)(),creditrulename:r.name,description:r.description},a=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/creditrules"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!a.ok){let e=await a.json();throw Error(e.message||"Failed to add credit rule")}let s=await a.json();t([...e,s]),v(),h.oR.success("Credit Rule added successfully!")}catch(e){h.oR.error(e.message||"Failed to add credit rule")}},F=async(r,i)=>{try{if(!(await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/creditrules/").concat(r),{method:"DELETE"})).ok)throw Error("Failed to delete credit rule");t(e.filter(e=>e.id!==r)),h.oR.success('Credit Rule "'.concat(i,'" deleted successfully!'))}catch(e){h.oR.error(e.message||"Failed to delete credit rule")}},U=e=>{R(e),b(!0),C.setFieldsValue({name:e.creditrulename,description:e.description})},N=()=>{b(!1),R(null)},I=async()=>{try{let r=await C.validateFields(),i={...g,creditrulename:r.name,description:r.description};if(!(await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/creditrules/").concat(g.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok)throw Error("Failed to update credit rule");t(e.map(e=>e.id===i.id?i:e)),N(),h.oR.success("Credit Rule updated successfully!")}catch(e){h.oR.error("Failed to update credit rule")}},_=[{title:"Credit Rule Name",dataIndex:"creditrulename",key:"creditrulename"},{title:"Description",dataIndex:"description",key:"description"},{title:"Actions",key:"actions",render:(e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Ay,{type:"link",onClick:()=>U(t),icon:(0,i.jsx)(j.A,{})}),(0,i.jsx)(o.A,{title:'Are you sure to delete "'.concat(t.creditrulename,'"?'),onConfirm:()=>F(t.id,t.creditrulename),okText:"Yes",cancelText:"No",children:(0,i.jsx)(d.Ay,{type:"link",danger:!0,icon:(0,i.jsx)(x.A,{})})})]})}];return(0,i.jsxs)(f.A,{children:[(0,i.jsx)(y.A,{title:"Credit Rule Management",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)(A,{level:4,children:"Manage Credit Rules"}),(0,i.jsx)(d.Ay,{type:"primary",onClick:()=>{s(!0),C.resetFields()},style:{marginBottom:16},children:"Add Credit Rule"}),(0,i.jsx)(l.A,{dataSource:e,columns:_,rowKey:"id",bordered:!0,pagination:{pageSize:5}}),(0,i.jsx)(c.A,{title:"Add Credit Rule",visible:r,onCancel:v,onOk:E,children:(0,i.jsxs)(n.A,{form:C,layout:"vertical",children:[(0,i.jsx)(n.A.Item,{name:"name",label:"Credit Rule Name",rules:[{required:!0,message:"Please enter credit rule name"}],children:(0,i.jsx)(u.A,{})}),(0,i.jsx)(n.A.Item,{name:"description",label:"Description",children:(0,i.jsx)(u.A.TextArea,{rows:4})})]})}),(0,i.jsx)(c.A,{title:"Edit Credit Rule",visible:w,onCancel:N,onOk:I,children:(0,i.jsxs)(n.A,{form:C,layout:"vertical",children:[(0,i.jsx)(n.A.Item,{name:"name",label:"Credit Rule Name",rules:[{required:!0,message:"Please enter credit rule name"}],children:(0,i.jsx)(u.A,{})}),(0,i.jsx)(n.A.Item,{name:"description",label:"Description",children:(0,i.jsx)(u.A.TextArea,{rows:4})})]})})]})}),(0,i.jsx)(h.N9,{})]})}},6715:(e,t,r)=>{e.exports=r(8440)},1303:(e,t,r)=>{"use strict";let i;r.d(t,{A:()=>d});let a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},s=new Uint8Array(16),n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));let d=function(e,t,r){if(a.randomUUID&&!t&&!e)return a.randomUUID();let d=(e=e||{}).random??e.rng?.()??function(){if(!i){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");i=crypto.getRandomValues.bind(crypto)}return i(s)}();if(d.length<16)throw Error("Random bytes length must be >= 16");if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=d[e];return t}return function(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}(d)}}},e=>{var t=t=>e(e.s=t);e.O(0,[6053,3418,8331,2453,5262,7239,2084,1106,8728,3067,6740,3093,7078,9901,1565,3608,3009,1609,636,6593,8792],()=>t(2949)),_N_E=e.O()}]);