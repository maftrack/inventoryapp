(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[625],{6261:(e,s,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage-purchase-form/addPurchase/service-purchase",function(){return i(8232)}])},5318:(e,s,i)=>{"use strict";i.d(s,{A:()=>d});var r=i(8168),t=i(6540);let a={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"};var c=i(9121);let d=t.forwardRef(function(e,s){return t.createElement(c.A,(0,r.A)({},e,{ref:s,icon:a}))})},8232:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>u});var r=i(4848),t=i(5703),a=i.n(t),c=i(1531),d=i(8331),n=i(460),o=i(6715),l=i(6540),b=i(5093),x=i.n(b),h=i(5318),v=i(8383),m=i(3093);let u=e=>{let{purchase:s}=e;(0,o.useRouter)();let[i,t]=(0,l.useState)(null),[b,u]=(0,l.useState)({}),[j,p]=(0,l.useState)([]);(0,l.useEffect)(()=>{fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/services/services-with-categories")).then(e=>e.json()).then(e=>{var s;let i=e.reduce((e,s)=>{let i=s.categoryName;return e[i]||(e[i]=[]),e[i].push({id:s.serviceId,serviceName:s.serviceName,creditUsed:s.creditUsed||"N/A",expirationService:s.expirationService,status:s.status||"N/A"}),e},{});t({customer:(null===(s=e[0])||void 0===s?void 0:s.customerName)||"N/A",services:i}),u(Object.keys(i).reduce((e,s)=>(e[s]=!0,e),{}))}).catch(e=>{console.error("Error fetching transaction data:",e)})},[]);let f=e=>{u(s=>({...s,[e]:!s[e]}))},w=(e,s)=>{p(i=>s?[...i,e]:i.filter(s=>s!==e))},g=(e,s)=>{if(i.services[e]){let r=i.services[e].map(e=>e.id);p(e=>s?[...new Set([...e,...r])]:e.filter(e=>!r.includes(e)))}};return i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Ay,{type:"primary",onClick:async()=>{console.log(j),console.log(s);let e=j.map(e=>({serviceId:e,user:s.user,transactionId:s.transactionId}));try{let s=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/PurchaseService/CreatePurchasesService"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});s.ok||m.oR.error("Error creating purchase");let i=await s.json();console.log(i),m.oR.success("Purchase created successfully")}catch(e){console.error("There was a problem with the fetch operation:",e)}},style:{marginBottom:16},children:"Complete"}),(0,r.jsx)(d.A,{children:Object.entries(i.services).map((e,s)=>{let[i,t]=e;return(0,r.jsxs)("div",{className:"jsx-b70db42088342716",children:[(0,r.jsxs)("div",{style:{background:"#f0f0f0",padding:"12px 16px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},className:"jsx-b70db42088342716",children:[(0,r.jsxs)("span",{className:"jsx-b70db42088342716",children:[" ",s+1,". ",i]}),(0,r.jsx)(n.A,{checked:t.some(e=>j.includes(e.id)),onChange:e=>g(i,e),style:{marginLeft:"auto"}}),(0,r.jsx)("div",{onClick:()=>f(i),style:{cursor:"pointer",marginLeft:"10px"},className:"jsx-b70db42088342716",children:b[i]?(0,r.jsx)(h.A,{}):(0,r.jsx)(v.A,{})})]}),b[i]&&(0,r.jsx)("div",{className:"jsx-b70db42088342716 p-4 bg-white",children:(0,r.jsxs)("div",{className:"jsx-b70db42088342716 service-table",children:[(0,r.jsxs)("div",{className:"jsx-b70db42088342716 service-row header",children:[(0,r.jsx)("div",{className:"jsx-b70db42088342716 service-name",children:"Service Name"}),(0,r.jsx)("div",{className:"jsx-b70db42088342716 service-used",children:"Credit Used"}),(0,r.jsx)("div",{className:"jsx-b70db42088342716 service-expired",children:"Expiration Date"}),(0,r.jsx)("div",{className:"jsx-b70db42088342716 service-status",children:"Status"}),(0,r.jsx)("div",{className:"jsx-b70db42088342716 service-actions",children:"Action"})]}),t.map(e=>(0,r.jsxs)("div",{className:"jsx-b70db42088342716 "+"service-row ".concat(j.includes(e.id)?"checked":""),children:[(0,r.jsx)("div",{className:"jsx-b70db42088342716 service-name",children:e.serviceName}),(0,r.jsx)("div",{className:"jsx-b70db42088342716 service-used",children:e.creditUsed}),(0,r.jsx)("div",{className:"jsx-b70db42088342716 service-expired",children:e.expirationService?x()(e.expirationService).format("YYYY-MM-DD"):"N/A"}),(0,r.jsx)("div",{className:"jsx-b70db42088342716 service-status",children:e.status}),(0,r.jsx)("div",{className:"jsx-b70db42088342716 service-actions",children:(0,r.jsx)(n.A,{checked:j.includes(e.id),onChange:s=>w(e.id,s)})})]},e.id))]})})]},i)})}),(0,r.jsx)(a(),{id:"b70db42088342716",children:".service-table.jsx-b70db42088342716{margin:0 -16px}.service-row.jsx-b70db42088342716{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:12px 16px;border-bottom:1px solid#f0f0f0}.service-row.header.jsx-b70db42088342716{background:#fafafa;font-weight:500}.service-name.jsx-b70db42088342716{width:20%;min-width:200px}.service-expired.jsx-b70db42088342716{width:25%;color:#666}.service-status.jsx-b70db42088342716{width:20%}.service-used.jsx-b70db42088342716{width:15%}.service-actions.jsx-b70db42088342716{width:15%;min-width:120px;text-align:right}.checked.jsx-b70db42088342716{background-color:#fff20442}@media(max-width:768px){.service-row.jsx-b70db42088342716{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start}.service-name.jsx-b70db42088342716,.service-expired.jsx-b70db42088342716,.service-status.jsx-b70db42088342716,.service-actions.jsx-b70db42088342716,.service-used.jsx-b70db42088342716{width:100%;min-width:0}.service-actions.jsx-b70db42088342716{text-align:left;margin-top:8px}}"})]}):(0,r.jsx)("p",{children:"No valid data."})}},6715:(e,s,i)=>{e.exports=i(8440)}},e=>{var s=s=>e(e.s=s);e.O(0,[3197,6053,8331,3093,5029,460,636,6593,8792],()=>s(6261)),_N_E=e.O()}]);