(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{1765:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage-service-form",function(){return a(3643)}])},5204:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var i=a(4848);a(6540);var s=a(8331);let r=e=>{let{title:t,children:a,maxWidth:r=1200,fullWidth:c=!1}=e;return(0,i.jsx)(s.A,{title:t,bordered:!1,style:{width:"100%",maxWidth:c?"100%":r,margin:"0 auto",transition:"max-width 0.2s ease-in-out"},children:a})}},5318:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var i=a(8168),s=a(6540);let r={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"};var c=a(9121);let n=s.forwardRef(function(e,t){return s.createElement(c.A,(0,i.A)({},e,{ref:t,icon:r}))})},8857:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>o,ye:()=>r});var i=a(6540),s=a(1102);let r=["xxl","xl","lg","md","sm","xs"],c=e=>({xs:"(max-width: ".concat(e.screenXSMax,"px)"),sm:"(min-width: ".concat(e.screenSM,"px)"),md:"(min-width: ".concat(e.screenMD,"px)"),lg:"(min-width: ".concat(e.screenLG,"px)"),xl:"(min-width: ".concat(e.screenXL,"px)"),xxl:"(min-width: ".concat(e.screenXXL,"px)")}),n=e=>{let t=[].concat(r).reverse();return t.forEach((a,i)=>{let s=a.toUpperCase(),r="screen".concat(s,"Min"),c="screen".concat(s);if(!(e[r]<=e[c]))throw Error("".concat(r,"<=").concat(c," fails : !(").concat(e[r],"<=").concat(e[c],")"));if(i<t.length-1){let a="screen".concat(s,"Max");if(!(e[c]<=e[a]))throw Error("".concat(c,"<=").concat(a," fails : !(").concat(e[c],"<=").concat(e[a],")"));let r=t[i+1].toUpperCase(),n="screen".concat(r,"Min");if(!(e[a]<=e[n]))throw Error("".concat(a,"<=").concat(n," fails : !(").concat(e[a],"<=").concat(e[n],")"))}}),e};function o(){let[,e]=(0,s.Ay)(),t=c(n(e));return i.useMemo(()=>{let e=new Map,a=-1,i={};return{matchHandlers:{},dispatch:t=>(i=t,e.forEach(e=>e(i)),e.size>=1),subscribe(t){return e.size||this.register(),a+=1,e.set(a,t),t(i),a},unsubscribe(t){e.delete(t),e.size||this.unregister()},unregister(){Object.keys(t).forEach(e=>{let a=t[e],i=this.matchHandlers[a];null==i||i.mql.removeListener(null==i?void 0:i.listener)}),e.clear()},register(){Object.keys(t).forEach(e=>{let a=t[e],s=t=>{let{matches:a}=t;this.dispatch(Object.assign(Object.assign({},i),{[e]:a}))},r=window.matchMedia(a);r.addListener(s),this.matchHandlers[a]={mql:r,listener:s},s(r)})},responsiveMap:t}},[e])}},1017:(e,t,a)=>{"use strict";a.d(t,{F:()=>c});var i=a(4542),s=function(e){if((0,i.A)()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],a=window.document.documentElement;return t.some(function(e){return e in a.style})}return!1},r=function(e,t){if(!s(e))return!1;var a=document.createElement("div"),i=a.style[e];return a.style[e]=t,a.style[e]!==i};function c(e,t){return Array.isArray(e)||void 0===t?s(e):r(e,t)}},3643:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var i=a(4848),s=a(5703),r=a.n(s),c=a(1744),n=a(1565),o=a(6740),l=a(1531),d=a(878),h=a(3608),x=a(8728),p=a(4044),u=a(5318),m=a(8383),f=a(5349),v=a(8899),b=a(6540),j=a(3093);a(4338);var w=a(5204),g=a(1609);let{Panel:y}=c.A,{Title:A}=n.A,N=()=>{let[e,t]=(0,b.useState)([]),[a,s]=(0,b.useState)([]),[c,n]=(0,b.useState)([]),[y,N]=(0,b.useState)(!1),[S,k]=(0,b.useState)(null),[E]=o.A.useForm(),[z,M]=(0,b.useState)({});(0,b.useEffect)(()=>{(async()=>{try{let[e,a,i]=await Promise.all([fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/ManageServices/all")),fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/creditrules")),fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/services"))]),r=await e.json();t(r),s(await a.json()),n(await i.json());let c={};r.forEach(e=>{c[e.categoryName]=!0}),M(c)}catch(e){j.oR.error("Failed to load data")}})()},[]);let C=e=>{M(t=>({...t,[e]:!t[e]}))},O=e.reduce((e,t)=>{let a=t.categoryName;return e[a]||(e[a]=[]),e[a].push(t),e},{}),P=async e=>{try{let a=S?"".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/ManageServices/").concat(S.manageServiceId):"".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/ManageServices");if(!(await fetch(a,{method:S?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serviceId:e.service,creditId:e.credit})})).ok)throw Error();let i=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/ManageServices/all")).then(e=>e.json());t(i),j.oR.success("Service ".concat(S?"updated":"added"," successfully!")),N(!1),k(null)}catch(e){j.oR.error("Operation failed!")}},_=async(e,a)=>{try{await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/ManageServices/").concat(e),{method:"DELETE"}),t(t=>t.filter(t=>t.manageServiceId!==e)),j.oR.success('Service "'.concat(a,'" deleted successfully!'))}catch(e){j.oR.error("Delete failed!")}};return(0,i.jsx)(g.A,{children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)(w.A,{title:"Manage Services",fullWidth:!0,children:(0,i.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto",padding:24},className:"jsx-5ebe84218858e6fa",children:[(0,i.jsx)(j.N9,{position:"top-right",autoClose:3e3}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:24},className:"jsx-5ebe84218858e6fa",children:[(0,i.jsx)(A,{level:3,children:"Managed Services"}),(0,i.jsx)(l.Ay,{type:"primary",icon:(0,i.jsx)(p.A,{}),onClick:()=>{E.resetFields(),N(!0)},children:"Add Service Pairing"})]}),Object.entries(O).map((e,t)=>{let[a,s]=e;return(0,i.jsxs)("div",{className:"jsx-5ebe84218858e6fa",children:[(0,i.jsxs)("div",{onClick:()=>C(a),style:{background:"#f0f0f0",padding:"12px 16px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},className:"jsx-5ebe84218858e6fa",children:[(0,i.jsxs)("span",{className:"jsx-5ebe84218858e6fa",children:[" ",t+1,". ",a]}),z[a]?(0,i.jsx)(u.A,{}):(0,i.jsx)(m.A,{})]}),z[a]&&(0,i.jsx)("div",{className:"jsx-5ebe84218858e6fa p-4 bg-white",children:(0,i.jsxs)("div",{className:"jsx-5ebe84218858e6fa service-table",children:[(0,i.jsxs)("div",{className:"jsx-5ebe84218858e6fa service-row header",children:[(0,i.jsx)("div",{className:"jsx-5ebe84218858e6fa service-name",children:"Service Name"}),(0,i.jsx)("div",{className:"jsx-5ebe84218858e6fa service-description",children:"Description"}),(0,i.jsx)("div",{className:"jsx-5ebe84218858e6fa service-credit",children:"Credit Rule"}),(0,i.jsx)("div",{className:"jsx-5ebe84218858e6fa service-actions",children:"Actions"})]}),s.map(e=>(0,i.jsxs)("div",{className:"jsx-5ebe84218858e6fa service-row",children:[(0,i.jsx)("div",{className:"jsx-5ebe84218858e6fa service-name",children:e.serviceName}),(0,i.jsx)("div",{className:"jsx-5ebe84218858e6fa service-description",children:e.serviceDescription}),(0,i.jsx)("div",{className:"jsx-5ebe84218858e6fa service-credit",children:e.creditRuleName}),(0,i.jsxs)("div",{className:"jsx-5ebe84218858e6fa service-actions flex gap-2",children:[(0,i.jsx)(l.Ay,{icon:(0,i.jsx)(f.A,{}),onClick:()=>{k(e),E.setFieldsValue({service:e.serviceId,credit:e.creditRuleId}),N(!0)}}),(0,i.jsx)(d.A,{title:'Are you sure to delete "'.concat(e.serviceName,'"?'),onConfirm:()=>_(e.manageServiceId,e.serviceName),okText:"Yes",cancelText:"No",children:(0,i.jsx)(l.Ay,{icon:(0,i.jsx)(v.A,{}),danger:!0})})]})]},e.manageServiceId))]})})]},a)}),(0,i.jsx)(h.A,{title:S?"Edit Service Pairing":"New Service Pairing",visible:y,onCancel:()=>{N(!1),k(null)},footer:null,children:(0,i.jsxs)(o.A,{form:E,layout:"vertical",onFinish:P,children:[(0,i.jsx)(o.A.Item,{name:"service",label:"Service",rules:[{required:!0,message:"Please select a service!"}],children:(0,i.jsx)(x.A,{placeholder:"Select service",children:c.map(e=>(0,i.jsx)(x.A.Option,{value:e.id,children:e.servicename},e.id))})}),(0,i.jsx)(o.A.Item,{name:"credit",label:"Credit Rule",rules:[{required:!0,message:"Please select a credit rule!"}],children:(0,i.jsx)(x.A,{placeholder:"Select credit rule",children:a.map(e=>(0,i.jsx)(x.A.Option,{value:e.id,children:e.creditrulename},e.id))})}),(0,i.jsx)(l.Ay,{type:"primary",htmlType:"submit",block:!0,children:S?"Update Pairing":"Create Pairing"})]})}),(0,i.jsx)(r(),{id:"5ebe84218858e6fa",children:".service-collapse .ant-collapse-item{border-bottom:none!important;margin-bottom:16px;background:#fff;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 2px 8px rgba(0,0,0,.1);-moz-box-shadow:0 2px 8px rgba(0,0,0,.1);box-shadow:0 2px 8px rgba(0,0,0,.1)}.service-collapse .ant-collapse-header{background:#fafafa;-webkit-border-radius:8px!important;-moz-border-radius:8px!important;border-radius:8px!important;font-weight:500}.service-table{margin:0 -16px}.service-row{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:12px 16px;border-bottom:1px solid#f0f0f0}.service-row.header{background:#fafafa;font-weight:500}.service-name{width:25%;min-width:200px}.service-description{width:45%;color:#666}.service-credit{width:20%}.service-actions{width:10%;min-width:120px;text-align:right}@media(max-width:768px){.service-row{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start}.service-name,.service-description,.service-credit,.service-actions{width:100%;min-width:0}.service-actions{text-align:left;margin-top:8px}}"})]})})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6053,3418,8331,2453,5262,7239,2084,1106,8728,6740,3093,1565,3608,3009,5029,1744,1609,636,6593,8792],()=>t(1765)),_N_E=e.O()}]);