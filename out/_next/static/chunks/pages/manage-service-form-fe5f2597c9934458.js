(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{1765:(e,i,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage-service-form",function(){return t(3643)}])},5204:(e,i,t)=>{"use strict";t.d(i,{A:()=>s});var a=t(4848);t(6540);var r=t(8331);let s=e=>{let{title:i,children:t,maxWidth:s=1200,fullWidth:c=!1}=e;return(0,a.jsx)(r.A,{title:i,bordered:!1,style:{width:"100%",maxWidth:c?"100%":s,margin:"0 auto",transition:"max-width 0.2s ease-in-out"},children:t})}},5318:(e,i,t)=>{"use strict";t.d(i,{A:()=>n});var a=t(8168),r=t(6540);let s={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"};var c=t(9121);let n=r.forwardRef(function(e,i){return r.createElement(c.A,(0,a.A)({},e,{ref:i,icon:s}))})},8857:(e,i,t)=>{"use strict";t.d(i,{Ay:()=>l,ye:()=>s});var a=t(6540),r=t(1102);let s=["xxl","xl","lg","md","sm","xs"],c=e=>({xs:"(max-width: ".concat(e.screenXSMax,"px)"),sm:"(min-width: ".concat(e.screenSM,"px)"),md:"(min-width: ".concat(e.screenMD,"px)"),lg:"(min-width: ".concat(e.screenLG,"px)"),xl:"(min-width: ".concat(e.screenXL,"px)"),xxl:"(min-width: ".concat(e.screenXXL,"px)")}),n=e=>{let i=[].concat(s).reverse();return i.forEach((t,a)=>{let r=t.toUpperCase(),s="screen".concat(r,"Min"),c="screen".concat(r);if(!(e[s]<=e[c]))throw Error("".concat(s,"<=").concat(c," fails : !(").concat(e[s],"<=").concat(e[c],")"));if(a<i.length-1){let t="screen".concat(r,"Max");if(!(e[c]<=e[t]))throw Error("".concat(c,"<=").concat(t," fails : !(").concat(e[c],"<=").concat(e[t],")"));let s=i[a+1].toUpperCase(),n="screen".concat(s,"Min");if(!(e[t]<=e[n]))throw Error("".concat(t,"<=").concat(n," fails : !(").concat(e[t],"<=").concat(e[n],")"))}}),e};function l(){let[,e]=(0,r.Ay)(),i=c(n(e));return a.useMemo(()=>{let e=new Map,t=-1,a={};return{matchHandlers:{},dispatch:i=>(a=i,e.forEach(e=>e(a)),e.size>=1),subscribe(i){return e.size||this.register(),t+=1,e.set(t,i),i(a),t},unsubscribe(i){e.delete(i),e.size||this.unregister()},unregister(){Object.keys(i).forEach(e=>{let t=i[e],a=this.matchHandlers[t];null==a||a.mql.removeListener(null==a?void 0:a.listener)}),e.clear()},register(){Object.keys(i).forEach(e=>{let t=i[e],r=i=>{let{matches:t}=i;this.dispatch(Object.assign(Object.assign({},a),{[e]:t}))},s=window.matchMedia(t);s.addListener(r),this.matchHandlers[t]={mql:s,listener:r},r(s)})},responsiveMap:i}},[e])}},3643:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>A});var a=t(4848),r=t(5703),s=t.n(r),c=t(1744),n=t(1565),l=t(6740),o=t(1531),d=t(878),x=t(3608),m=t(8728),h=t(4044),p=t(5318),v=t(8383),u=t(5349),f=t(8899),b=t(6540),j=t(3093);t(4338);var g=t(5204),w=t(1609);let{Panel:y}=c.A,{Title:N}=n.A,A=()=>{let[e,i]=(0,b.useState)([]),[t,r]=(0,b.useState)([]),[c,n]=(0,b.useState)([]),[y,A]=(0,b.useState)(!1),[S,k]=(0,b.useState)(null),[E]=l.A.useForm(),[M,C]=(0,b.useState)({});(0,b.useEffect)(()=>{(async()=>{try{let[e,t,a]=await Promise.all([fetch("".concat("http://192.168.0.104:5216/api","/ManageServices/all")),fetch("".concat("http://192.168.0.104:5216/api","/creditrules")),fetch("".concat("http://192.168.0.104:5216/api","/services"))]),s=await e.json();i(s),r(await t.json()),n(await a.json());let c={};s.forEach(e=>{c[e.categoryName]=!0}),C(c)}catch(e){j.oR.error("Failed to load data")}})()},[]);let O=e=>{C(i=>({...i,[e]:!i[e]}))},P=e.reduce((e,i)=>{let t=i.categoryName;return e[t]||(e[t]=[]),e[t].push(i),e},{}),_=async e=>{try{let t=S?"".concat("http://192.168.0.104:5216/api","/ManageServices/").concat(S.manageServiceId):"".concat("http://192.168.0.104:5216/api","/ManageServices");if(!(await fetch(t,{method:S?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serviceId:e.service,creditId:e.credit})})).ok)throw Error();let a=await fetch("".concat("http://192.168.0.104:5216/api","/ManageServices/all")).then(e=>e.json());i(a),j.oR.success("Service ".concat(S?"updated":"added"," successfully!")),A(!1),k(null)}catch(e){j.oR.error("Operation failed!")}},z=async(e,t)=>{try{await fetch("".concat("http://192.168.0.104:5216/api","/ManageServices/").concat(e),{method:"DELETE"}),i(i=>i.filter(i=>i.manageServiceId!==e)),j.oR.success('Service "'.concat(t,'" deleted successfully!'))}catch(e){j.oR.error("Delete failed!")}};return(0,a.jsx)(w.A,{children:(0,a.jsx)("div",{className:"col-md-12",children:(0,a.jsx)(g.A,{title:"Manage Services",fullWidth:!0,children:(0,a.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto",padding:24},className:"jsx-5ebe84218858e6fa",children:[(0,a.jsx)(j.N9,{position:"top-right",autoClose:3e3}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:24},className:"jsx-5ebe84218858e6fa",children:[(0,a.jsx)(N,{level:3,children:"Managed Services"}),(0,a.jsx)(o.Ay,{type:"primary",icon:(0,a.jsx)(h.A,{}),onClick:()=>{E.resetFields(),A(!0)},children:"Add Service Pairing"})]}),Object.entries(P).map((e,i)=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"jsx-5ebe84218858e6fa",children:[(0,a.jsxs)("div",{onClick:()=>O(t),style:{background:"#f0f0f0",padding:"12px 16px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},className:"jsx-5ebe84218858e6fa",children:[(0,a.jsxs)("span",{className:"jsx-5ebe84218858e6fa",children:[" ",i+1,". ",t]}),M[t]?(0,a.jsx)(p.A,{}):(0,a.jsx)(v.A,{})]}),M[t]&&(0,a.jsx)("div",{className:"jsx-5ebe84218858e6fa p-4 bg-white",children:(0,a.jsxs)("div",{className:"jsx-5ebe84218858e6fa service-table",children:[(0,a.jsxs)("div",{className:"jsx-5ebe84218858e6fa service-row header",children:[(0,a.jsx)("div",{className:"jsx-5ebe84218858e6fa service-name",children:"Service Name"}),(0,a.jsx)("div",{className:"jsx-5ebe84218858e6fa service-description",children:"Description"}),(0,a.jsx)("div",{className:"jsx-5ebe84218858e6fa service-credit",children:"Credit Rule"}),(0,a.jsx)("div",{className:"jsx-5ebe84218858e6fa service-actions",children:"Actions"})]}),r.map(e=>(0,a.jsxs)("div",{className:"jsx-5ebe84218858e6fa service-row",children:[(0,a.jsx)("div",{className:"jsx-5ebe84218858e6fa service-name",children:e.serviceName}),(0,a.jsx)("div",{className:"jsx-5ebe84218858e6fa service-description",children:e.serviceDescription}),(0,a.jsx)("div",{className:"jsx-5ebe84218858e6fa service-credit",children:e.creditRuleName}),(0,a.jsxs)("div",{className:"jsx-5ebe84218858e6fa service-actions flex gap-2",children:[(0,a.jsx)(o.Ay,{icon:(0,a.jsx)(u.A,{}),onClick:()=>{k(e),E.setFieldsValue({service:e.serviceId,credit:e.creditRuleId}),A(!0)}}),(0,a.jsx)(d.A,{title:'Are you sure to delete "'.concat(e.serviceName,'"?'),onConfirm:()=>z(e.manageServiceId,e.serviceName),okText:"Yes",cancelText:"No",children:(0,a.jsx)(o.Ay,{icon:(0,a.jsx)(f.A,{}),danger:!0})})]})]},e.manageServiceId))]})})]},t)}),(0,a.jsx)(x.A,{title:S?"Edit Service Pairing":"New Service Pairing",visible:y,onCancel:()=>{A(!1),k(null)},footer:null,children:(0,a.jsxs)(l.A,{form:E,layout:"vertical",onFinish:_,children:[(0,a.jsx)(l.A.Item,{name:"service",label:"Service",rules:[{required:!0,message:"Please select a service!"}],children:(0,a.jsx)(m.A,{placeholder:"Select service",children:c.map(e=>(0,a.jsx)(m.A.Option,{value:e.id,children:e.servicename},e.id))})}),(0,a.jsx)(l.A.Item,{name:"credit",label:"Credit Rule",rules:[{required:!0,message:"Please select a credit rule!"}],children:(0,a.jsx)(m.A,{placeholder:"Select credit rule",children:t.map(e=>(0,a.jsx)(m.A.Option,{value:e.id,children:e.creditrulename},e.id))})}),(0,a.jsx)(o.Ay,{type:"primary",htmlType:"submit",block:!0,children:S?"Update Pairing":"Create Pairing"})]})}),(0,a.jsx)(s(),{id:"5ebe84218858e6fa",children:".service-collapse .ant-collapse-item{border-bottom:none!important;margin-bottom:16px;background:#fff;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 2px 8px rgba(0,0,0,.1);-moz-box-shadow:0 2px 8px rgba(0,0,0,.1);box-shadow:0 2px 8px rgba(0,0,0,.1)}.service-collapse .ant-collapse-header{background:#fafafa;-webkit-border-radius:8px!important;-moz-border-radius:8px!important;border-radius:8px!important;font-weight:500}.service-table{margin:0 -16px}.service-row{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:12px 16px;border-bottom:1px solid#f0f0f0}.service-row.header{background:#fafafa;font-weight:500}.service-name{width:25%;min-width:200px}.service-description{width:45%;color:#666}.service-credit{width:20%}.service-actions{width:10%;min-width:120px;text-align:right}@media(max-width:768px){.service-row{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start}.service-name,.service-description,.service-credit,.service-actions{width:100%;min-width:0}.service-actions{text-align:left;margin-top:8px}}"})]})})})})}}},e=>{var i=i=>e(e.s=i);e.O(0,[994,1531,8331,3418,2453,5262,7239,2084,1106,8728,6740,3093,1565,3608,3009,5029,1744,1609,636,6593,8792],()=>i(1765)),_N_E=e.O()}]);