(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2812],{9043:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/services-category-form",function(){return a(5547)}])},5204:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(4848);a(6540);var o=a(8331);let s=e=>{let{title:t,children:a,maxWidth:s=1200,fullWidth:i=!1}=e;return(0,r.jsx)(o.A,{title:t,bordered:!1,style:{width:"100%",maxWidth:i?"100%":s,margin:"0 auto",transition:"max-width 0.2s ease-in-out"},children:a})}},5547:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var r=a(4848),o=a(6540),s=a(1565),i=a(6740),n=a(1531),c=a(878),d=a(9901),l=a(3608),y=a(1027),u=a(6715),h=a(3093);a(4338);var p=a(1303),g=a(1609),m=a(5204),f=a(5349),j=a(8899),x=a(4071);let{Title:A}=s.A,w=()=>{let e=(0,u.useRouter)(),[t,a]=(0,o.useState)([]),[s,w]=(0,o.useState)(!1),[b,v]=(0,o.useState)(!1),[N,C]=(0,o.useState)(null),[k]=i.A.useForm(),E=async()=>{try{let e=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/categories"));if(!e.ok)throw Error("Failed to fetch categories");let t=await e.json();a(t)}catch(e){h.oR.error("Failed to fetch categories")}};(0,o.useEffect)(()=>{E()},[]);let F=()=>{w(!1)},U=async()=>{try{let e=await k.validateFields(),r={categoryid:(0,p.A)(),categoryName:e.name,description:e.description},o=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/categories"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok){let e=await o.json();throw Error(e.message||"Failed to add category")}let s=await o.json();a([...t,s]),F(),h.oR.success("Category added successfully!")}catch(e){h.oR.error(e.message||"Failed to add category")}},R=async(e,r)=>{try{if(!(await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/categories/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete category");a(t.filter(t=>t.categoryid!==e)),h.oR.success('Category "'.concat(r,'" deleted successfully!'))}catch(e){h.oR.error(e.message||"Failed to delete category")}},S=e=>{C(e),v(!0),k.setFieldsValue({name:e.categoryName,description:e.description})},I=()=>{v(!1),C(null)},_=async()=>{try{let e=await k.validateFields(),r={...N,categoryName:e.name,description:e.description};if(console.log(r),!(await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/categories/").concat(N.categoryid),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw Error("Failed to update category");a(t.map(e=>e.categoryid===r.categoryid?r:e)),I(),h.oR.success("Category updated successfully!")}catch(e){h.oR.error("Failed to update category")}},D=[{title:"Category Name",dataIndex:"categoryName",key:"categoryName"},{title:"Description",dataIndex:"description",key:"description"},{title:"Actions",key:"actions",render:(t,a)=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Ay,{type:"link",onClick:()=>S(a),icon:(0,r.jsx)(f.A,{})}),(0,r.jsx)(c.A,{title:'Warning! Deleting this category will also remove the associated services. Are you sure you want to delete "'.concat(a.categoryName,'"?'),onConfirm:()=>R(a.categoryid,a.categoryName),okText:"Yes",cancelText:"No",children:(0,r.jsx)(n.Ay,{type:"link",danger:!0,icon:(0,r.jsx)(j.A,{})})}),(0,r.jsx)(n.Ay,{type:"link",onClick:()=>e.push({pathname:"/services-category-form/detail/".concat(a.categoryid),query:{categoryName:a.categoryName}}),icon:(0,r.jsx)(x.A,{})})]})}];return(0,r.jsxs)(g.A,{children:[(0,r.jsx)(m.A,{title:"Services Form",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)(A,{level:4,children:"Manage Service Categories"}),(0,r.jsx)(n.Ay,{type:"primary",onClick:()=>{w(!0),k.resetFields()},style:{marginBottom:16},children:"Add Category"}),(0,r.jsx)(d.A,{dataSource:t,columns:D,rowKey:"categoryid",bordered:!0,pagination:{pageSize:5}}),(0,r.jsx)(l.A,{title:"Add Category",visible:s,onCancel:F,onOk:U,children:(0,r.jsxs)(i.A,{form:k,layout:"vertical",children:[(0,r.jsx)(i.A.Item,{name:"name",label:"Category Name",rules:[{required:!0,message:"Please enter category name"}],children:(0,r.jsx)(y.A,{})}),(0,r.jsx)(i.A.Item,{name:"description",label:"Description",children:(0,r.jsx)(y.A.TextArea,{rows:4})})]})}),(0,r.jsx)(l.A,{title:"Edit Category",visible:b,onCancel:I,onOk:_,children:(0,r.jsxs)(i.A,{form:k,layout:"vertical",children:[(0,r.jsx)(i.A.Item,{name:"name",label:"Category Name",rules:[{required:!0,message:"Please enter category name"}],children:(0,r.jsx)(y.A,{})}),(0,r.jsx)(i.A.Item,{name:"description",label:"Description",children:(0,r.jsx)(y.A.TextArea,{rows:4})})]})})]})}),(0,r.jsx)(h.N9,{})]})}},6715:(e,t,a)=>{e.exports=a(8440)},1303:(e,t,a)=>{"use strict";let r;a.d(t,{A:()=>n});let o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},s=new Uint8Array(16),i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));let n=function(e,t,a){if(o.randomUUID&&!t&&!e)return o.randomUUID();let n=(e=e||{}).random??e.rng?.()??function(){if(!r){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(s)}();if(n.length<16)throw Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((a=a||0)<0||a+16>t.length)throw RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[a+e]=n[e];return t}return function(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}(n)}}},e=>{var t=t=>e(e.s=t);e.O(0,[6053,3418,8331,2453,5262,7239,2084,1106,8728,3067,6740,3093,7078,9901,1565,3608,3009,1609,636,6593,8792],()=>t(9043)),_N_E=e.O()}]);