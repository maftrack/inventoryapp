(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3301],{9077:(e,r,d)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/pricing-catalogue-form",function(){return d(2222)}])},5204:(e,r,d)=>{"use strict";d.d(r,{A:()=>l});var i=d(4848);d(6540);var t=d(8331);let l=e=>{let{title:r,children:d,maxWidth:l=1200,fullWidth:n=!1}=e;return(0,i.jsx)(t.A,{title:r,bordered:!1,style:{width:"100%",maxWidth:n?"100%":l,margin:"0 auto",transition:"max-width 0.2s ease-in-out"},children:d})}},2222:(e,r,d)=>{"use strict";d.r(r),d.d(r,{default:()=>b});var i=d(4848),t=d(6540),l=d(8728),n=d(6740),s=d(1531),a=d(3608),o=d(1027),c=d(5204),g=d(1609),p=d(3093),h=d(6715);let{Option:x}=l.A,b=()=>{var e,r,d;let{pricingCategory:b}=(0,h.useRouter)().query,[u,y]=(0,t.useState)(""),[j,f]=(0,t.useState)([]),[m,A]=(0,t.useState)({}),[k,v]=(0,t.useState)(!1),[w,C]=(0,t.useState)(!1),[T]=n.A.useForm(),[S,q]=(0,t.useState)(null),[N,_]=(0,t.useState)(!1),[P,W]=(0,t.useState)(null),[E,F]=(0,t.useState)(null),R=async()=>{try{let e=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/pricingcategories"));if(e.ok){let r=await e.json();f(r)}else console.error("Failed to fetch services:",e.statusText)}catch(e){console.error("Error fetching services:",e)}},I=async()=>{try{let e={};for(let r of j){let d=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/tiers/pricingcategory/").concat(r.id));if(d.ok){let i=await d.json();e[r.id]=i.map(e=>({tier:"Tier ".concat(e.tierNumber),quality:e.qualityRange,credit:e.creditPerUnit}))}else console.error("Failed to fetch tiers for service ".concat(r.id,":"),d.statusText)}A(e)}catch(e){console.error("Error fetching tiers for all services:",e)}};(0,t.useEffect)(()=>{R()},[]),(0,t.useEffect)(()=>{j.length>0&&I()},[j]);let U=e=>{F(e),v(!0)},O=(e,r)=>{F(e),W(r);let d=m[e][r];T.setFieldsValue({quality:d.quality,credit:d.credit}),C(!0)},L=()=>{v(!1),C(!1),T.resetFields()},Q=(e,r)=>{let d=m[e].filter((e,d)=>d!==r);A(r=>({...r,[e]:d}))},B=()=>{let e=[];for(let[r,d]of Object.entries(m)){let i=j.find(e=>e.id===r);i&&d.forEach(r=>{let d=parseInt(r.tier.replace("Tier ",""),10);e.push({PricingCategoryId:i.id,TierNumber:d,QualityRange:r.quality,CreditPerUnit:r.credit})})}return e},z=async()=>{let e=B();try{let r=await fetch("".concat("https://inventoryapp-be-fuenbjdjhpahefh3.southeastasia-01.azurewebsites.net/api","/tiers"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});r.ok?(p.oR.success("Tiers posted successfully!"),I()):p.oR.error(r.statusText)}catch(e){p.oR.error("An error occurred while posting data.")}};return(0,i.jsxs)(g.A,{children:[(0,i.jsx)(c.A,{title:"Service Pricing",children:(0,i.jsxs)("div",{style:{padding:"20px"},children:[(0,i.jsxs)(l.A,{showSearch:!0,placeholder:"Select a service",onChange:e=>{q(e),N&&_(!1)},style:{width:200,marginRight:10},filterOption:(e,r)=>{var d;return(null!==(d=null==r?void 0:r.children)&&void 0!==d?d:"").toLowerCase().includes(e.toLowerCase())},children:[(0,i.jsx)(x,{value:"",disabled:!0,children:"Select a service"}),j.map(e=>(0,i.jsx)(x,{value:e.id,children:e.pricingCategoryName},e.id))]}),(0,i.jsx)(s.Ay,{style:{marginLeft:"10px"},onClick:()=>{_(e=>{let r=!e;return r&&q(null),r})},children:N?"Hide All":"Show All"}),(0,i.jsx)(s.Ay,{type:"primary",onClick:z,style:{marginTop:"20px"},children:"Submit"}),S&&!N&&(0,i.jsx)("div",{style:{marginTop:"20px"},children:(0,i.jsx)(c.A,{title:(null===(e=j.find(e=>e.id===S))||void 0===e?void 0:e.pricingCategoryName)||S,children:(0,i.jsxs)("div",{style:{padding:"20px"},children:[(0,i.jsx)(s.Ay,{type:"primary",onClick:()=>U(S),children:"Add Tier"}),(0,i.jsx)("br",{}),(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px",textAlign:"center",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",boxShadow:"rgb(0 0 0 / 23%) 5px 5px 10px 6px"},children:[(0,i.jsxs)("thead",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{border:"1px solid #ddd"}}),(0,i.jsx)("th",{colSpan:3,style:{color:"#4da72e",fontWeight:"bolder",border:"1px solid #ddd",padding:"8px",background:"linear-gradient(90deg, rgb(127, 136, 145) 0%, rgb(175, 185, 194) 35%, rgb(123, 148, 153) 100%)"},children:(null===(r=j.find(e=>e.id===S))||void 0===r?void 0:r.pricingCategoryName)||S})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{color:"#4da72e",fontWeight:"bolder",border:"1px solid #ddd",padding:"8px",background:"linear-gradient(90deg, rgb(127, 136, 145) 0%, rgb(175, 185, 194) 35%, rgb(123, 148, 153) 100%)"},children:"Tier"}),(0,i.jsx)("th",{style:{border:"1px solid #ddd",color:"white",padding:"8px",background:"linear-gradient(359deg, #b2eb3f 0%, #6ea502 100%)"},children:"Quality [Sensor]"}),(0,i.jsx)("th",{style:{border:"1px solid #ddd",color:"white",padding:"8px",background:"linear-gradient(359deg, rgb(15, 201, 2) 0%, rgb(12, 138, 0) 100%)"},children:"Credit per Unit/month"}),(0,i.jsx)("th",{style:{color:"#4da72e",fontWeight:"bolder",border:"1px solid #ddd",color:"white",padding:"8px",background:"linear-gradient(258deg, rgb(68, 240, 115) 0%, rgb(34, 173, 9) 100%)"},children:"Action"})]})]}),(0,i.jsxs)("tbody",{children:[(m[S]||[]).map((e,r)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{color:"#4da72e",fontWeight:"bolder",border:"1px solid #ddd",padding:"8px",background:r%2==0?"linear-gradient(90deg, rgb(127, 136, 145) 0%, rgb(175, 185, 194) 35%, rgb(123, 148, 153) 100%)":"linear-gradient(90deg, rgb(189, 196, 204) 0%, rgb(204, 207, 210) 35%, rgb(224, 237, 241) 100%)"},children:e.tier}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",backgroundColor:r%2==0?"#c4df9c":"#ecf5e0"},children:e.quality}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",backgroundColor:r%2==0?"#b1d373":"#e7f1d4"},children:e.credit}),(0,i.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px",backgroundColor:"rgb(199 237 130)"},children:[(0,i.jsx)(s.Ay,{type:"primary",onClick:()=>O(S,r),children:"Update"}),(0,i.jsx)(s.Ay,{type:"btn btn-danger",onClick:()=>Q(S,r),style:{marginLeft:"10px"},children:"Delete"})]})]},r)),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{color:"#4da72e",fontWeight:"bolder",border:"1px solid #ddd",padding:"8px",background:"linear-gradient(90deg, rgb(189, 196, 204) 0%, rgb(204, 207, 210) 35%, rgb(224, 237, 241) 100%)"},children:"Volume Base"}),(0,i.jsx)("td",{colSpan:3,style:{border:"1px solid #ddd",color:"#4da72e",fontWeight:"bolder",padding:"8px",textAlign:"center",background:"linear-gradient(90deg, rgb(189, 196, 204) 0%, rgb(204, 207, 210) 35%, rgb(224, 237, 241) 100%)"},children:null===(d=j.find(e=>e.id===S))||void 0===d?void 0:d.volumeBase})]})]})]})]})})}),N&&(0,i.jsx)("div",{style:{marginTop:"20px"},children:j.map(e=>(0,i.jsx)(c.A,{title:e.pricingCategoryName,children:(0,i.jsxs)("div",{style:{padding:"20px"},children:[(0,i.jsx)(s.Ay,{type:"primary",onClick:()=>U(e.id),children:"Add Tier"}),(0,i.jsx)("br",{}),(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px",textAlign:"center",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",boxShadow:"rgb(0 0 0 / 23%) 5px 5px 10px 6px"},children:[(0,i.jsxs)("thead",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{border:"1px solid #ddd"}}),(0,i.jsx)("th",{colSpan:3,style:{border:"1px solid #ddd",padding:"8px",color:"white",background:"linear-gradient(90deg, rgb(127, 136, 145) 0%, rgb(175, 185, 194) 35%, rgb(123, 148, 153) 100%)"},children:e.pricingCategoryName})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",background:"linear-gradient(90deg, rgb(127, 136, 145) 0%, rgb(175, 185, 194) 35%, rgb(123, 148, 153) 100%)",color:"#4da72e",fontWeight:"bolder"},children:"Tier"}),(0,i.jsx)("th",{style:{border:"1px solid #ddd",color:"white",padding:"8px",background:"linear-gradient(359deg, #b2eb3f 0%, #6ea502 100%)"},children:"Quality [Sensor]"}),(0,i.jsx)("th",{style:{border:"1px solid #ddd",color:"white",padding:"8px",background:"linear-gradient(359deg, rgb(15, 201, 2) 0%, rgb(12, 138, 0) 100%)"},children:"Credit per Unit/month"}),(0,i.jsx)("th",{style:{border:"1px solid #ddd",color:"white",padding:"8px",background:"linear-gradient(258deg, rgb(68, 240, 115) 0%, rgb(34, 173, 9) 100%)"},children:"Action"})]})]}),(0,i.jsxs)("tbody",{children:[(m[e.id]||[]).map((r,d)=>(0,i.jsxs)("tr",{style:{background:d%2==0?"linear-gradient(160deg, #c4df9c 0%, #c4df9c 100%)":"linear-gradient(160deg, #ffebee 0%, #9ab8ef 100%)"},children:[(0,i.jsx)("td",{style:{color:"#4da72e",fontWeight:"bolder",border:"1px solid #ddd",padding:"8px",background:d%2==0?"linear-gradient(90deg, rgb(127, 136, 145) 0%, rgb(175, 185, 194) 35%, rgb(123, 148, 153) 100%)":"linear-gradient(90deg, rgb(189, 196, 204) 0%, rgb(204, 207, 210) 35%, rgb(224, 237, 241) 100%)"},children:r.tier}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",backgroundColor:d%2==0?"#c4df9c":"#ecf5e0"},children:r.quality}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",backgroundColor:d%2==0?"#b1d373":"#e7f1d4"},children:r.credit}),(0,i.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px",backgroundColor:"rgb(199 237 130)"},children:[(0,i.jsx)(s.Ay,{type:"primary",onClick:()=>O(e.id,d),children:"Update"}),(0,i.jsx)(s.Ay,{type:"danger",onClick:()=>Q(e.id,d),style:{marginLeft:"10px"},children:"Delete"})]})]},d)),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{color:"#4da72e",fontWeight:"bolder",border:"1px solid #ddd",padding:"8px",background:"linear-gradient(90deg, rgb(127, 136, 145) 0%, rgb(175, 185, 194) 35%, rgb(123, 148, 153) 100%)"},children:"Volume Base"}),(0,i.jsx)("td",{colSpan:3,style:{border:"1px solid #ddd",color:"#4da72e",fontWeight:"bolder",padding:"8px",textAlign:"center",background:"linear-gradient(90deg, rgb(127, 136, 145) 0%, rgb(175, 185, 194) 35%, rgb(123, 148, 153) 100%)"},children:e.volumeBase})]})]})]})]})},e.id))})]})}),(0,i.jsx)(a.A,{title:"Add New Tier",visible:k,onCancel:L,footer:null,children:(0,i.jsxs)(n.A,{form:T,onFinish:e=>{let r=m[E]||[],d=r.length+1,i=[...r,{tier:"Tier ".concat(d),...e}];A(e=>({...e,[E]:i})),v(!1),T.resetFields()},children:[(0,i.jsx)(n.A.Item,{name:"quality",label:"Quality",rules:[{required:!0,message:"Please input the quality!"}],children:(0,i.jsx)(o.A,{})}),(0,i.jsx)(n.A.Item,{name:"credit",label:"Credit",rules:[{required:!0,message:"Please input the credit!"}],children:(0,i.jsx)(o.A,{})}),(0,i.jsx)(n.A.Item,{children:(0,i.jsx)(s.Ay,{type:"primary",htmlType:"submit",children:"Add Tier"})})]})}),(0,i.jsx)(a.A,{title:"Update Tier",visible:w,onCancel:L,footer:null,children:(0,i.jsxs)(n.A,{form:T,onFinish:e=>{let r=[...m[E]];r[P]={...r[P],quality:e.quality,credit:e.credit},A(e=>({...e,[E]:r})),C(!1),T.resetFields()},children:[(0,i.jsx)(n.A.Item,{name:"quality",label:"Quality",rules:[{required:!0,message:"Please input the quality!"}],children:(0,i.jsx)(o.A,{})}),(0,i.jsx)(n.A.Item,{name:"credit",label:"Credit",rules:[{required:!0,message:"Please input the credit!"}],children:(0,i.jsx)(o.A,{})}),(0,i.jsx)(n.A.Item,{children:(0,i.jsx)(s.Ay,{type:"primary",htmlType:"submit",children:"Update Tier"})})]})}),(0,i.jsx)(p.N9,{})]})}},6715:(e,r,d)=>{e.exports=d(8440)}},e=>{var r=r=>e(e.s=r);e.O(0,[6053,3418,8331,2453,5262,7239,2084,1106,8728,3067,6740,3093,3608,1609,636,6593,8792],()=>r(9077)),_N_E=e.O()}]);